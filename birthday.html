<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ù…Ø§Ø³ÙŠÙ…Ùˆ â€” VIP Realistic</title>

<!-- Ø®Ø·ÙˆØ· -->
<link href="https://fonts.googleapis.com/css2?family=Amiri&family=Tajawal:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --pink-1:#fff0f6;
    --pink-2:#ffd6ec;
    --pink-3:#ff7ab6;
    --purple:#7b2b6b;
    --gold:#d6b64a;
    --ribbon:#d62839;
    --paper-bg:#fffdf9;
    --text:#2b0a1a;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:"Tajawal", "Amiri", sans-serif;background:linear-gradient(130deg,var(--pink-1),var(--pink-2) 30%,var(--pink-3) 65%, #fff 100%);color:var(--text);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}

  /* Ù†Ø§Ø¹Ù…Ø© Ù„Ø§Ù…Ø¹Ø© */
  .glow {
    position:fixed; inset:0; pointer-events:none; z-index:0;
    background:
      radial-gradient(600px 300px at 10% 20%, rgba(255,255,255,0.08), transparent 10%),
      radial-gradient(800px 400px at 90% 80%, rgba(255,240,210,0.06), transparent 12%);
    mix-blend-mode: overlay;
    opacity:0.95;
  }

  .wrap{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;z-index:2;}

  /* Ø§Ù„Ù…Ø´Ù‡Ø¯ */
  .scene{
    width:860px; max-width:94vw; display:flex; gap:40px; align-items:center; justify-content:center; flex-direction:column;
  }

  .table{
    width:760px; max-width:88vw; height:340px; border-radius:20px; background:
    linear-gradient(180deg, rgba(255,255,255,0.28), rgba(255,255,255,0.12));
    box-shadow: 0 20px 60px rgba(14,6,20,0.12), inset 0 -6px 20px rgba(0,0,0,0.03);
    display:flex; align-items:center; justify-content:center; position:relative; overflow:visible;
    backdrop-filter: blur(4px);
  }

  /* subtle top text */
  h1{font-size:28px;margin:8px 0 2px;color:#fff;text-shadow:0 6px 20px rgba(123,43,107,0.18);font-weight:800;letter-spacing:1px}
  .sub{color:rgba(255,255,255,0.9);margin:0;font-size:14px}

  /* Ø§Ù„Ø¸Ø±Ù */
  .envelope-wrap{position:relative;width:420px;height:240px; display:flex; align-items:center; justify-content:center; z-index:6; pointer-events:auto;}
  .envelope{
    width:380px; height:200px; border-radius:12px; position:relative; background:linear-gradient(180deg,#fff6fb,#fff1f8);
    box-shadow: 0 18px 40px rgba(10,6,12,0.18);
    border:1px solid rgba(255,255,255,0.4);
    display:flex; align-items:center; justify-content:center; cursor:pointer; transition: transform .22s ease;
  }
  .envelope:active{ transform: translateY(2px) }

  /* flap triangle */
  .envelope::before{
    content:"";
    position:absolute; top:-2px; left:50%; transform:translateX(-50%);
    width:0; height:0;
    border-left:190px solid transparent;
    border-right:190px solid transparent;
    border-bottom:110px solid var(--pink-3);
    border-bottom-color: linear-gradient(180deg,var(--pink-3),var(--purple));
    clip-path: polygon(0 0, 100% 0, 50% 100%);
    transition: transform .8s cubic-bezier(.2,.9,.25,1);
    z-index:8;
  }

  /* overlay ribbon */
  .ribbon{
    position:absolute; top:86px; left:50%; transform:translateX(-50%); z-index:12;
    display:flex; align-items:center; gap:10px;
  }
  .ribbon .band{
    height:44px; min-width:260px; padding:0 18px; border-radius:8px; background:linear-gradient(90deg,var(--ribbon),#c51b2a);
    color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; letter-spacing:0.6px;
    box-shadow:0 8px 20px rgba(198,40,60,0.18);
    transform-origin:center;
    transition: transform .45s ease, opacity .4s ease;
  }
  .ribbon .bow{
    width:36px;height:36px;border-radius:8px;background:linear-gradient(90deg,#a40f23,#ff4b6e);box-shadow:0 8px 18px rgba(164,15,35,0.18);
    display:flex;align-items:center;justify-content:center;color:#fff;font-weight:900;font-size:18px;
    transform-origin:center;
  }

  /* band torn state */
  .band.torn{ animation: tear .6s ease forwards; }
  @keyframes tear{
    0%{ transform:scaleY(1) translateY(0); opacity:1 }
    60%{ transform:scaleY(.3) translateY(2px) rotate(-6deg); opacity:.7 }
    100%{ transform:scaleY(.08) translateY(20px) rotate(-20deg); opacity:0 }
  }

  /* "open hint" text that appears after tear */
  .open-hint{
    position:absolute; top:150px; left:50%; transform:translateX(-50%); z-index:14;
    background: rgba(255,255,255,0.06);
    padding:8px 14px; border-radius:999px; color:#fff; font-weight:700; font-size:14px;
    border:1px solid rgba(255,255,255,0.06); display:none;
  }
  .open-hint.show{ display:block }

  /* paper (hidden until open) */
  .paper{
    width:340px; height:380px; position:absolute; bottom:14px; left:50%; transform:translateX(-50%) translateY(40px);
    background:var(--paper-bg); border-radius:10px; box-shadow:0 16px 48px rgba(0,0,0,0.18);
    padding:22px; opacity:0; transition: transform .9s cubic-bezier(.2,.9,.25,1), opacity .9s;
    border: 3px solid rgba(214,182,90,0.9); /* gold border */
    box-sizing:border-box; overflow:auto; z-index:9;
  }
  .paper.show{ transform:translateX(-50%) translateY(-18px); opacity:1 }

  .paper h2{ margin:0 0 6px 0; color:var(--purple); font-size:20px; text-align:right; font-weight:700; }
  .paper .msg{ text-align:right; white-space:pre-wrap; line-height:1.7; font-size:15px; color:var(--text) }

  /* helper small controls (hidden mobile) */
  .controls{ position:absolute; top:18px; right:18px; z-index:30; display:flex; gap:10px; align-items:center; }
  .small-btn{ padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.08); color:#fff; border:1px solid rgba(255,255,255,0.06); font-weight:700; cursor:pointer }

  /* responsive */
  @media (max-width:540px){
    .table{ height:420px; padding:18px }
    .envelope{ width:320px; height:180px }
    .envelope::before{ border-left:160px solid transparent; border-right:160px solid transparent; border-bottom:96px solid var(--pink-3); }
    .paper{ width:86%; height:56vh; bottom:10px; padding:16px; }
    .ribbon .band{ min-width:200px; height:40px; padding:0 12px }
  }
</style>
</head>
<body>

<div class="glow" aria-hidden="true"></div>

<!-- éŸ³æ¥½ / Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ -->
<audio id="music" loop preload="auto">
  <source src="music.mp3" type="audio/mpeg">
  <!-- Ø¶Ø¹ Ù…Ø³Ø§Ø± Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡ -->
</audio>

<div class="wrap">
  <div style="text-align:center; margin-bottom:10px;">
    <h1>Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ â€” Smasimo ğŸ€</h1>
    <p class="sub">Ù„Ù…Ø³Ø§Øª Ø¨Ø³ÙŠØ·Ø©ØŒ Ù…Ø´Ù‡Ø¯ ÙˆØ§Ù‚Ø¹ÙŠØŒ Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨</p>
  </div>

  <div class="table" role="main" aria-labelledby="title">
    <!-- controls -->
    <div class="controls" aria-hidden="false">
      <button class="small-btn" id="musicBtn">ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</button>
    </div>

    <div class="envelope-wrap" aria-hidden="false">
      <div class="envelope" id="envelope" aria-pressed="false" tabindex="0" title="Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¸Ø±Ù">
        <!-- ribbon -->
        <div class="ribbon" id="ribbon">
          <div class="band" id="bandText">ÙƒÙ„ Ø³Ù†Ø© ÙˆØ§Ù†ØªÙŠ Ø·ÙŠØ¨Ø© ÙŠØ§ Ø£Ù…ÙŠØ±Ø©</div>
          <div class="bow">â¤</div>
        </div>

        <!-- hint -->
        <div class="open-hint" id="openHint">Ø§ÙØªØ­Ù†ÙŠ</div>

        <!-- realistic paper inside (hidden until open) -->
        <div class="paper" id="paper" aria-hidden="true">
          <h2>Ø¥Ù„Ù‰ Ø³Ù…Ø§Ø³ÙŠÙ…Ùˆâ€¦ â¤ï¸</h2>
          <div class="msg" id="msg">
ÙƒÙ„ Ø³Ù†Ø© ÙˆØ¥Ù†Ùƒ Ø¨Ø®ÙŠØ±â€¦
ÙˆÙŠÙ…ÙƒÙ† Ø¯ÙŠ Ø£ØºØ±Ø¨ Ù…Ø¹Ø§ÙŠØ¯Ø© ÙÙŠ Ø­ÙŠØ§ØªÙŠØŒ
Ù…Ø´ Ø¨Ø³ Ø¹Ù„Ø´Ø§Ù† Ø§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ù„ÙŠ Ø¨ÙŠÙ†Ø§â€¦
Ù„ÙƒÙ† Ø¹Ù„Ø´Ø§Ù† Ø¯ÙŠ Ø£ÙˆÙ„ Ù…Ø±Ø© Ø£Ù‚ÙˆÙ„Ù‘Ùƒ "Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯" ÙˆØ£Ù†Ø§ Ø£ØµÙ„Ø§Ù‹ Ù…Ø´ ÙÙŠ Ø­ÙŠØ§ØªÙƒ.

Ø¨Ø³ Ù…Ù‡Ù…Ø§ Ø­ØµÙ„â€¦
ÙˆÙ„Ø§ Ø³Ù†Ø© Ù…Ù† Ø¹Ù…Ø±ÙŠ Ø¹Ø¯Ù‘Øª Ø¨Ø¯ÙˆÙ† Ù…Ø§ Ø£ÙØªÙƒØ± Ø§Ù„ÙŠÙˆÙ… Ø¯Ù‡.
ÙŠÙˆÙ… Ø§ØªÙˆÙ„Ø¯Øª ÙÙŠÙ‡ Ø­Ø¯Ù‘â€¦ ÙƒØ§Ù† ÙˆØ¬ÙˆØ¯Ù‡ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠØ§ Ø£Ø¬Ù…Ù„ Ù…Ù† Ø£ÙŠ Ø¹ÙŠØ¯.

Ù…ÙƒÙ†ØªØ´ Ù†Ø§ÙˆÙŠ Ø£ÙƒØªØ¨â€¦
ÙˆÙ„Ø§ Ø£Ø±Ø¬Ø¹â€¦
ÙˆÙ„Ø§ Ø£ÙØªØ­ Ø£Ø¨ÙˆØ§Ø¨ ÙƒÙ†ØªÙŠ Ø¥Ù†ØªÙ Ø§Ù„Ù„ÙŠ Ù‚ÙÙ„ØªÙŠÙ‡Ø§.
Ø¨Ø³ Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø©â€¦ Ø§Ù„Ø¯Ù†ÙŠØ§ Ø²Ù‚Ù‘ØªÙ†ÙŠ Ù„ÙŠÙƒÙŠ Ø²Ù‚Ù‘Ø©.
ÙˆÙ‚Ø§Ù„ØªÙ„ÙŠ:
"Ø§ÙØªÙƒØ±â€¦ ÙˆØ§ÙØªÙƒØ±Ù‡Ø§Ù„ÙŠ."

ÙØ§ÙØªÙƒØ±ØªÙƒâ€¦
Ø§ÙØªÙƒØ±Øª Ø¶Ø­ÙƒØªÙƒ Ø§Ù„Ù„ÙŠ ÙƒØ§Ù†Øª Ø¨ØªØºÙŠÙ‘Ø± ÙŠÙˆÙ…ÙŠ ÙƒÙ„Ù‡ØŒ
Ø§ÙØªÙƒØ±Øª ÙƒÙ„Ø§Ù…ÙƒØŒ ÙˆÙ…ÙˆØ§Ù‚Ù ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§â€¦
Ø¨Ø³ Ø£Ø«Ù‘Ø±ÙˆØ§ ÙÙŠÙ‘Ù Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¹Ù…Ù„Ù‡Ø§Ø´ Ø­Ø¯Ù‘.

Ø¹Ø§Ø±ÙØ©â€¦
Ø£Ù†Ø§ ØºÙ„Ø·Øª ÙƒØªÙŠØ±ØŒ ÙˆØ§Ù„ÙˆØ¬Ø¹ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ Ø¨ÙŠÙ†Ø§ Ù…Ø´ Ø¨Ø³ÙŠØ·.
ÙˆØ§Ù†ØªÙŠ Ù…Ø´ÙŠØªÙŠâ€¦ ÙˆÙƒÙ†Øª ÙØ§ÙƒØ± Ø¥Ù† Ø§Ù„ÙˆÙ‚Øª Ù‡ÙŠÙ„Ù…Ù‘ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹.
Ø¨Ø³ Ø§Ù„Ù„ÙŠ Ø­ØµÙ„ Ø§Ù„Ø¹ÙƒØ³â€¦
Ø§Ù„ÙˆÙ‚Øª ÙØ¶Ù‘Ù„ ÙŠÙˆØ±ÙŠÙ†ÙŠ Ù‚Ø¯Ù‘ Ø¥ÙŠÙ‡ ÙˆØ¬ÙˆØ¯Ùƒ ÙƒØ§Ù† Ù†Ø¹Ù…Ø©.

Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒâ€¦
ÙˆØ£Ù†Ø§ Ù…Ø´ Ø¬Ø§ÙŠ Ø£Ø±Ø¬Ù‘Ø¹ Ø§Ù„Ù„ÙŠ Ø±Ø§Ø­ØŒ ÙˆÙ„Ø§ Ø£Ø¹Ù…Ù„ Ø¯Ø±Ø§Ù…Ø§.
Ø£Ù†Ø§ Ø¬Ø§ÙŠ Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø¨Ø³â€¦
Ø¥Ù†Ùƒ ÙˆØ­Ø´ØªÙŠÙ†ÙŠ.

Ù…Ø´ ÙˆØ­Ø´Ø© Ø±Ø¬ÙˆØ¹â€¦
ÙˆØ­Ø´Ø© Ø¥Ù†Ø³Ø§Ù†Ø© ÙƒØ§Ù†Øª Ø¬Ø²Ø¡ Ù…Ù† Ø±ÙˆØ­ÙŠØŒ
ÙˆØ­Ø´Ø© Ø¶Ø­ÙƒØ©ØŒ ÙˆØ­Ù„Ø§ÙˆØ©ØŒ ÙˆØªÙØ§ØµÙŠÙ„â€¦
Ù…Ø´ Ø¹Ø§Ø±Ù Ø£ÙƒØ±Ù‡Ù‡Ø§ Ù…Ù‡Ù…Ø§ Ø­Ø§ÙˆÙ„Øª.

ÙˆÙŠÙ…ÙƒÙ† ØªØªÙØ§Ø¬Ø¦ÙŠâ€¦
Ø¥Ù† Ø¨Ø¹Ø¯ ÙƒÙ„ Ø§Ù„ÙˆÙ‚Øª Ø¯Ù‡ØŒ
Ù„Ø³Ù‡ ÙÙŠ ÙƒÙ„Ø§Ù… ÙƒØªÙŠØ± Ù†ÙØ³ÙŠ Ø£Ù‚ÙˆÙ„Ù‡â€¦
ÙˆÙ„Ø³Ù‡ ÙÙŠ Ø¬Ø²Ø¡ Ù…Ù†ÙŠâ€¦ Ø¨ÙŠØ¯Ø¹ÙŠÙ„ÙÙƒ.

ÙˆØ¨ÙŠÙ† ÙƒÙ„ Ù„ÙŠÙ„Ø© ÙˆÙ„ÙŠÙ„Ø©â€¦
ÙƒÙ†Øª Ø¨Ù„Ø§Ù‚ÙŠÙƒÙŠ ÙÙŠ Ø­Ù„Ù…ÙŠ.
Ø¹Ø§Ø±ÙØ©ØŸ
Ø§Ù„Ø­Ù„Ù… ÙƒØ§Ù† Ø¨ÙŠØ±Ø¬Ø¹Ù†ÙŠ Ù„Ø¯Ù‚Ø§ÙŠÙ‚ ÙƒÙ†Øª ÙØ§ÙƒØ±Ù‡Ø§ Ø±Ø§Ø­Øª.
ÙˆÙƒÙ†Øª Ø¨ØµØ­Ù‰â€¦
ÙˆØ£Ù‚Ø¹Ø¯ Ø³Ø§ÙƒØª Ø´ÙˆÙŠØ©ØŒ
Ø¹Ù„Ø´Ø§Ù† Ø§Ù„Ø­Ù„Ù… ÙƒØ§Ù† Ø´Ø¨Ù‡ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©â€¦
ÙˆÙŠÙ…ÙƒÙ† Ø£Ø­Ø³Ù†.

Ø¢Ù‡â€¦ ÙˆØ¨Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:
Ø¨Ø­Ø¨Ù‘ÙƒØŸ
Ø¢Ù‡â€¦
ÙˆÙ…Ø´ Ù‡Ø¯Ø§Ø±ÙŠ.
Ù„Ø³Ù‡ Ø¬ÙˆØ§ÙŠØ§ Ù†ÙØ³ Ø§Ù„Ø­Ø¨â€¦ Ø£Ù‡Ø¯Ø£â€¦ Ø£Ø¹Ù…Ù‚â€¦ ÙˆØ£ÙˆØ¶Ø­.

Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ ÙŠØ§ Ø³Ù…Ø§Ø³ÙŠÙ…Ùˆâ€¦ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø´ Ù…Ø¹Ø§ÙŠØ§. ğŸ‚ğŸ’—âœ¨
          </div>
        </div>
      </div>

      <!-- small instruction under envelope -->
      <div style="position:relative; text-align:center; margin-top:22px; z-index:6;">
        <small style="color:rgba(0,0,0,0.35)">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø­Ù…Ø± Ø£ÙˆÙ„Ù‹Ø§ Ù„ÙÙƒÙ‡ Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¸Ø±Ù Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</small>
      </div>
    </div>
  </div>
</div>

<script>
/* Ø¹Ù†Ø§ØµØ± DOM */
const ribbonBand = document.getElementById('bandText');
const bandWrap = document.getElementById('ribbon');
const envelope = document.getElementById('envelope');
const openHint = document.getElementById('openHint');
const paper = document.getElementById('paper');
const music = document.getElementById('music');
const musicBtn = document.getElementById('musicBtn');

/* Ø­Ø§Ù„Ø© */
let ribbonTorn = false;
let opened = false;

/* Ù…Ø³Ø§Ø¹Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª - ÙŠØ­Ø§ÙˆÙ„ Ø¨Ù„Ø§ Ø®Ø·Ø£ */
function tryPlay(a){
  a.play().catch(()=>{ /* Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªÙ…Ù†Ø¹ autoplay Ø¨Ø¯ÙˆÙ† ØªÙØ§Ø¹Ù„ */ });
}

/* 1) Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙŠØ· â€” ÙŠØ­Ø¯Ø« ØªÙ…Ø²Ù‚ */
ribbonBand.addEventListener('click', (e) => {
  if (ribbonTorn) return;
  ribbonTorn = true;
  ribbonBand.classList.add('torn');

  // ØµÙˆØª ØªÙ…Ø²ÙŠÙ‚ Ø®ÙÙŠÙ (Ø³Ù†Ø³ØªØ®Ø¯Ù… ØªØ£Ø«ÙŠØ± Ø¨Ø³ÙŠØ· Ø¹Ø¨Ø± WebAudio Ø¥Ù† Ù„Ù… ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù)
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = 'sawtooth';
    o.frequency.value = 540;
    g.gain.value = 0.0008;
    o.connect(g); g.connect(ctx.destination);
    o.start();
    setTimeout(()=>{ o.stop(); ctx.close(); }, 140);
  } catch(e){ /* ØªØ¬Ø§Ù‡Ù„ Ù„Ùˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… */ }

  // Ù†Ø®Ø¨Ù‘Ø¦ Ø§Ù„Ø´Ø±ÙŠØ· ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹ Ø«Ù… Ù†Ø¸Ù‡Ø± hint
  setTimeout(()=> {
    bandWrap.style.opacity = '0';
    setTimeout(()=> bandWrap.style.display = 'none', 450);
    openHint.classList.add('show');
  }, 350);
});

/* 2) Ø¨Ø¹Ø¯ ÙÙƒ Ø§Ù„Ø´Ø±ÙŠØ·ØŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· Ø§Ù„Ø¸Ø±Ù Ù„ÙØªØ­ Ø§Ù„ÙˆØ±Ù‚Ø© */
envelope.addEventListener('click', (e) => {
  // Ù„Ùˆ Ø§Ù„Ø´Ø±ÙŠØ· Ù„Ù… ÙŠØªÙ‚Ø·Ø¹ Ø¨Ø¹Ø¯ â€” Ù†Ø¹Ø±Ø¶ Ù„Ù…Ø­Ø© ØµØºÙŠØ±Ø©
  if(!ribbonTorn){
    // Ù†Ø¨Ù‡Ø±Ù‡: Ù†Ø±Ø¬ Ø§Ù„Ø´Ø±ÙŠØ· Ø´ÙˆÙŠÙ‡
    ribbonBand.animate([{transform:'translateY(0)'},{transform:'translateY(-6px)'},{transform:'translateY(0)'}], {duration:360});
    return;
  }
  if(opened) return;
  opened = true;

  // ØµÙˆØª Pop Ø¨Ø³ÙŠØ·
  tryPlay(music); // Ø§Ù„Ø·Ù„Ø¨: Ø´ØºÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = 'triangle';
    o.frequency.value = 700;
    g.gain.value = 0.002;
    o.connect(g); g.connect(ctx.destination);
    o.start();
    setTimeout(()=>{ o.stop(); ctx.close(); }, 140);
  } catch(e){ /* ignore */ }

  // Ø­Ø±ÙƒØ© Ø§Ù„Ø¸Ø±Ù: Ù†Ù‚Ù„ Ùˆ Ø§Ø¸Ù‡Ø§Ø± Ø§Ù„ÙˆØ±Ù‚Ø©
  envelope.classList.add('opening');
  openHint.classList.remove('show');
  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ÙˆØ±Ù‚Ø© Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·
  setTimeout(()=> {
    paper.classList.add('show');
    paper.setAttribute('aria-hidden','false');
    // Ù†Ø£Ø¶Ù…Ù† Ø£Ù† Ø§Ù„Ù†Øµ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© (scroll to top)
    paper.scrollTop = 0;
  }, 420);
});

/* ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ÙŠØ¯ÙˆÙŠØ§Ù‹ */
musicBtn.addEventListener('click', ()=> {
  if(music.paused){
    tryPlay(music);
    musicBtn.textContent = 'Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰';
  } else {
    music.pause();
    musicBtn.textContent = 'ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰';
  }
});

/* ØªÙØ§Ø¹Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­: Enter ÙŠÙØªØ­ Ø§Ù„Ø¸Ø±Ù (Ù„Ùˆ Ø§Ù„Ø´Ø±ÙŠØ· Ù…ÙÙƒÙˆÙƒ) */
document.addEventListener('keydown', (e) => {
  if(e.key === 'Enter' && ribbonTorn && !opened){
    envelope.click();
  }
});

/* Ù…Ù†Ø¹ Ø§Ù„Ø³Ø­Ø¨ Ùˆ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ ØºÙŠØ± Ø§Ù„Ù„Ø§Ø²Ù… */
document.addEventListener('dragstart', e=> e.preventDefault());
document.addEventListener('selectstart', e=> e.preventDefault());

</script>

</body>
</html>
