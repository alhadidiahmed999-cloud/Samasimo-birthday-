:root{
  --pink-1: #fff3f8;
  --pink-2: #ffd6eb;
  --pink-3: #ff7ab6;
  --purple: #7b2b6b;
  --gold: #d6b64a;
  --ribbon: #d62839;
  --text: #2b0a1a;
  --paper: #fffdf9;
}

/* Reset بسيط */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Tajawal","Amiri",sans-serif;background:linear-gradient(140deg,var(--pink-1),var(--pink-2) 35%,var(--pink-3) 70%, #fff 100%);color:var(--text);-webkit-font-smoothing:antialiased}

/* ناعمة لامعة فوق الخلفية */
.bg-gloss{
  position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    radial-gradient(800px 320px at 10% 18%, rgba(255,255,255,0.08), transparent 8%),
    radial-gradient(900px 400px at 90% 82%, rgba(255,240,210,0.06), transparent 12%);
  mix-blend-mode: overlay;
  opacity:0.95;
}

/* Top controls */
.top-controls{position:fixed; top:14px; left:14px; z-index:60}
.ctrl{background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.06); color:#fff; padding:8px 10px; border-radius:999px; font-weight:700; cursor:pointer}

/* Scene layout */
.scene{position:relative; z-index:10; min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:28px}
.title{margin:0;font-size:30px;color:#fff;text-shadow:0 10px 30px rgba(123,43,107,0.18); font-weight:800}
.subtitle{margin:6px 0 26px 0;color:rgba(255,255,255,0.9)}

/* Stage */
.stage{width:820px; max-width:94vw; display:flex; align-items:center; justify-content:center; gap:18px; position:relative}

/* Envelope wrap */
.envelope-wrap{position:relative; width:420px; height:320px; display:flex; align-items:center; justify-content:center; flex-direction:column}

/* Ribbon */
.ribbon{position:absolute; top:82px; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:10px; z-index:40; transition:opacity .45s ease}
.ribbon-band{background:linear-gradient(90deg,var(--ribbon),#b81a2a); color:#fff; padding:12px 18px; border-radius:10px; font-weight:800; box-shadow:0 10px 30px rgba(214,40,60,0.16)}
.ribbon-bow{width:38px;height:38px;border-radius:8px;background:linear-gradient(90deg,#b11a2e,#ff4b6e); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:900}

/* torn animation class */
.ribbon.torn{opacity:0; transform:scale(.86); pointer-events:none; transition:opacity .6s ease, transform .6s ease}

/* open hint */
.open-hint{position:absolute; top:150px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,0.06); padding:8px 14px; border-radius:999px; color:#fff; font-weight:700; border:1px solid rgba(255,255,255,0.06); display:none; z-index:45}
.open-hint.show{display:block}

/* Envelope */
.envelope{width:360px; height:220px; border-radius:12px; position:relative; background:linear-gradient(180deg,#fff6fb,#fff1f8); box-shadow: 0 18px 50px rgba(10,6,12,0.18); border:1px solid rgba(255,255,255,0.4); cursor:pointer; z-index:30; transition:transform .22s ease}
.envelope:active{transform:translateY(2px)}
/* cover move when open */
.envelope.open .env-cover{transform:translateY(-140%); transition:transform .9s cubic-bezier(.2,.9,.25,1)}
.env-cover{position:absolute; inset:0; border-radius:12px; background:linear-gradient(120deg,var(--pink-3),var(--purple)); box-shadow:inset 0 -6px 40px rgba(0,0,0,0.06)}

/* Paper (hidden initially) */
.paper{position:absolute; bottom:8px; left:50%; transform:translateX(-50%) translateY(28px); width:320px; height:380px; background:var(--paper); border-radius:12px; padding:20px; box-shadow:0 14px 48px rgba(10,6,12,0.18); opacity:0; transition:transform .9s cubic-bezier(.2,.9,.25,1), opacity .9s; border:3px solid rgba(214,182,90,0.98); z-index:32; overflow:auto}
.paper.show{transform:translateX(-50%) translateY(-14px); opacity:1}

/* paper text */
.paper-title{margin:0 0 10px 0; color:var(--purple); font-size:20px; text-align:right; font-weight:800}
.paper-text{font-size:15px; line-height:1.7; color:var(--text); text-align:right; white-space:pre-wrap}

/* small sparkles */
.sparkles{position:absolute; inset:0; pointer-events:none; z-index:20}
.sparkles::after{content:"✨"; position:absolute; right:12%; top:18%; opacity:.12; font-size:22px}
.sparkles::before{content:""; position:absolute; left:22%; bottom:14%; width:120px; height:120px; background:radial-gradient(circle,#fff3 0%, transparent 50%); opacity:.06}

/* responsive */
@media (max-width:540px){
  .stage{width:94vw}
  .envelope{width:300px;height:180px}
  .paper{width:86%; height:56vh}
  .ribbon{top:66px}
}
